# Chrome 扩展快速发布工具包

## 文件说明

### 主要文档
- **Chrome扩展自动化发布指南.md**: 完整的自动化发布配置指南
- **自定义服务器功能说明.md**: 扩展功能说明文档

### GitHub Actions
- **.github/workflows/release.yml**: 自动化发布工作流配置

### 辅助脚本
- **scripts/setup-webstore-auth.js**: Chrome Web Store API 认证配置脚本
- **scripts/release.sh**: 本地快速发布脚本
- **scripts/README.md**: 脚本使用说明

## 快速开始

### 1. 首次发布配置

```bash
# 1. 安装依赖
npm install googleapis inquirer

# 2. 运行认证配置脚本
node scripts/setup-webstore-auth.js

# 3. 按照提示完成 Google API 配置
# 4. 将生成的 Secrets 添加到 GitHub 仓库
```

### 2. 本地测试发布

```bash
# 快速发布（交互式）
./scripts/release.sh

# 指定版本发布
./scripts/release.sh 1.1.0

# 自动递增版本
./scripts/release.sh --auto-version

# 跳过测试并推送标签
./scripts/release.sh --skip-tests --push-tag 1.1.1
```

### 3. 自动化发布

```bash
# 推送标签触发自动发布
git tag v1.1.0
git push origin v1.1.0

# 或者在 GitHub Actions 页面手动触发
```

## 发布流程

1. **本地准备**
   - 更新版本号
   - 运行测试
   - 构建扩展包
   - 验证扩展包

2. **版本控制**
   - 提交版本更改
   - 创建版本标签
   - 推送到远程仓库

3. **自动化发布**
   - GitHub Actions 检测标签
   - 构建扩展包
   - 上传到 Chrome Web Store
   - 创建 GitHub Release

## 所需的 GitHub Secrets

在 GitHub 仓库设置中添加以下 Secrets：

| Secret 名称 | 描述 | 获取方法 |
|------------|------|----------|
| `GOOGLE_CLIENT_ID` | OAuth2 客户端 ID | Google Cloud Console |
| `GOOGLE_CLIENT_SECRET` | OAuth2 客户端密钥 | Google Cloud Console |
| `GOOGLE_REFRESH_TOKEN` | OAuth2 刷新令牌 | 认证配置脚本 |
| `EXTENSION_ID` | Chrome 扩展 ID | Chrome Web Store |

## 最佳实践

### 版本管理
- 使用语义化版本号 (MAJOR.MINOR.PATCH)
- 主版本：不兼容的 API 修改
- 次版本：向下兼容的功能新增  
- 修订版：向下兼容的问题修正

### 发布检查清单
- [ ] 功能测试通过
- [ ] 版本号已更新
- [ ] 更新日志已编写
- [ ] 权限配置正确
- [ ] 图标和截图最新

### 安全注意事项
- 不要在代码中包含 API 密钥
- 定期轮换访问令牌
- 使用最小权限原则
- 审查第三方依赖

## 故障排除

### 常见问题
1. **认证失败**: 检查 GitHub Secrets 配置
2. **构建失败**: 检查扩展文件完整性
3. **上传失败**: 验证扩展 ID 和权限
4. **审核被拒**: 查看 Chrome Web Store 反馈

### 获取帮助
- GitHub Issues: 报告问题和建议
- Chrome Web Store 支持: 审核相关问题
- Google Cloud 支持: API 配置问题

## 更新日志

- **2025-08-08**: 
  - 创建完整的自动化发布工具包
  - 添加本地快速发布脚本
  - 配置 GitHub Actions 工作流
  - 提供详细的配置指南
