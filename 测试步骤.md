# 新功能测试步骤

## 测试自定义服务器功能

### 准备工作
1. 确保本地服务器运行：`npm start`
2. 重新加载Chrome扩展（在 chrome://extensions/ 页面点击刷新）

### 测试步骤

#### 1. 测试默认服务器连接
- [ ] 打开扩展弹窗
- [ ] 验证默认地址显示为 `http://localhost:3000`
- [ ] 观察状态显示为"正在测试连接..."
- [ ] 验证状态变为"连接成功"，指示灯为绿色
- [ ] "开始选择元素"按钮应该可用

#### 2. 测试自定义服务器地址
- [ ] 修改服务器地址为 `http://127.0.0.1:3000`
- [ ] 点击"测试连接"按钮
- [ ] 验证连接成功
- [ ] 关闭弹窗再打开，验证地址已保存

#### 3. 测试无效服务器地址
- [ ] 输入无效URL（如 `invalid-url`）
- [ ] 观察状态显示"无效的URL格式"
- [ ] "开始选择元素"按钮应该禁用

#### 4. 测试离线服务器
- [ ] 停止本地服务器
- [ ] 输入 `http://localhost:3000` 并测试连接
- [ ] 观察状态显示"无法连接到服务器"
- [ ] "开始选择元素"按钮应该禁用

#### 5. 测试元素选择功能
- [ ] 重新启动服务器
- [ ] 确认服务器连接成功
- [ ] 在任意网页上选择元素
- [ ] 验证元素成功发送到服务器
- [ ] 检查 `captured/` 目录中的文件

### 预期结果
- ✅ 服务器配置能够正确保存和加载
- ✅ 连接状态实时更新且准确
- ✅ 只有在服务器在线时才能开始选择元素
- ✅ 错误信息清晰易懂
- ✅ 元素选择功能正常工作

### 常见问题排查
1. 如果状态一直显示"正在测试连接..."，检查网络和CORS设置
2. 如果配置无法保存，检查扩展是否有storage权限
3. 如果连接测试失败，检查服务器是否正确启动

## 兼容性测试

### 浏览器兼容性
- [ ] Chrome 最新版本
- [ ] Chrome 扩展清单 v3

### 服务器兼容性  
- [ ] 本地服务器 (localhost)
- [ ] 局域网服务器 (192.168.x.x)
- [ ] HTTPS 服务器（如果可用）

### 网页兼容性
- [ ] HTTP 网页
- [ ] HTTPS 网页  
- [ ] 不同CSP策略的网页
