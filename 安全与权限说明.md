# DOM Catcher 安全与权限说明

## 权限策略

DOM Catcher 采用**最小权限原则**，根据实际需要动态请求权限：

### 基础权限（默认授予）
- `activeTab`: 访问当前活动标签页
- `scripting`: 注入内容脚本进行元素选择
- `storage`: 保存用户配置
- `http://localhost:*/`: 连接本地开发服务器
- `http://127.0.0.1:*/`: 连接本地回环地址

### 可选权限（按需请求）
- `http://*/*`: 连接 HTTP 外部服务器（仅在用户配置时请求）
- `https://*/*`: 连接 HTTPS 外部服务器（仅在用户配置时请求）

## 权限请求时机

1. **本地服务器连接**：无需额外权限
2. **外部服务器连接**：首次配置时会弹出权限请求对话框

## 安全保障措施

### 1. 权限最小化
- 只有在用户配置外部服务器时才请求网络权限
- 权限请求仅限于用户指定的域名
- 用户可以随时撤销权限

### 2. 数据安全
- 捕获的 DOM 数据只发送到用户配置的服务器
- 不会收集、存储或传输用户的个人信息
- 所有网络通信使用标准 HTTP/HTTPS 协议

### 3. 透明度
- 明确说明每个权限的用途
- 提供详细的隐私政策
- 开源代码，可供审计

## 用户控制

### 权限管理
用户可以在 Chrome 扩展管理页面：
1. 查看已授予的权限
2. 撤销不需要的权限
3. 重新授予权限

### 服务器白名单
建议用户只连接信任的服务器：
- ✅ 自己搭建的本地或私有服务器
- ✅ 公司内网服务器
- ❌ 不明来源的第三方服务器

## 隐私保护

### 数据不留存
- 扩展本身不存储任何捕获的 HTML 内容
- 只临时传输数据到用户配置的服务器
- 服务器配置保存在用户本地

### 最小数据传输
- 只传输用户明确选择的 DOM 元素
- 不收集页面的其他内容或用户行为数据
- 不包含任何追踪或分析代码

## 安全建议

### 对于用户
1. **只连接信任的服务器**
2. **定期审查扩展权限**
3. **使用 HTTPS 服务器**（推荐）
4. **设置服务器访问控制**

### 对于开发者
1. **配置 CORS 头部**以允许跨域请求
2. **验证接收的数据**防止恶意输入
3. **使用 HTTPS**保护数据传输
4. **设置访问限制**（IP 白名单等）

## 报告安全问题

如果您发现安全漏洞，请通过以下方式联系：
- GitHub Issues: [项目地址]
- 邮箱: [安全联系邮箱]

我们承诺在收到报告后 48 小时内回复，并尽快修复确认的安全问题。

## 更新记录

- **v1.2**: 实施最小权限策略，添加动态权限请求
- **v1.1**: 新增自定义服务器配置功能
- **v1.0**: 基础功能发布

---

*本文档会随着功能更新而持续更新，请关注最新版本。*
